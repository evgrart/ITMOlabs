\input{preambula_labs}
\begin{document}
\thispagestyle{empty}
\begin{center}
\LARGE{Университет ИТМО} 
\vspace{20pt}

\LARGE{Факультет программной инженерии и компьютерной техники \\
Образовательная программа системное и прикладное программное обеспечение}
\vspace{160pt}

\LARGE{Лабораторная работа  \textnumero 4 \\
По дисциплине "Основы профессиональной деятельности" \\ 
Вариант 9400}
\vspace{120pt}
\end{center}

\begin{flushright}
\LARGE{Выполнил студент группы P3109 \\ 
Евграфов Артём Андреевич \\
Проверила: \\
Ткешелашвили Нино Мерабиевна}
\vspace{120pt}
\end{flushright}

\begin{center}
\Large{Санкт-Петербург 2025}
\end{center}

\newpage
\setcounter{page}{1}
\tableofcontents
\newpage
\section{Задание варианта 9400}
\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\linewidth]{PO1.png}
\end{figure}
\section{Описание программы}
\begin{longtable}{|>{\centering\arraybackslash}p{1cm}|>{\centering\arraybackslash}p{3cm}|>{\centering\arraybackslash}p{3cm}|>{\arraybackslash}p{8cm}|}
\hline
Адрес & Содержимое & Мнемоника & Комментарии \\
\hline
\endfirsthead

\hline
Адрес & Содержимое & Мнемоника & Комментарии \\
\hline
\endhead

\hline
\endfoot

\hline
\endlastfoot
0DC & 0200 & CLA & Очистка аккумулятора  \\\hline
0DD & EE18 & ST (IP + 18) & Загружаем $\text{AC} = 0000_{16}$ в ячейку (0F6), то есть обнуляем R \\\hline
0DE & AE14 & LD (IP + 14) & Инициализируем AC значением Z \\\hline
0DF & 0740 & DEC & Декрементируем AC \\\hline
0E0 & 0C00 & PUSH & Кладём AC на вершину стека, $\text{SP = }7\text{FF}_{16}$, $\text{(7FF)} = \text{Z - 1}$ \\\hline
0E1 & D691 & CALL 691 & Вызываем подпрограмму, $\text{SP} = 7\text{FE}_{16}$, 
$\text{(7FE)} = 00\text{E}2_{16}$ (на вершине стека адрес следующей команды после отработки функции) \\\hline
0E2 & 0800 & POP & AC = f(Z - 1), SP = 000 \\\hline
0E3 & 6E12 & SUB (IP + 12) & Вычитаем из AC (0F6) = 0000, AC не меняется \\\hline
0E4 & EE11 & ST (IP + 11) & (0F6) = AC = f(Z - 1) \\\hline
0E5 & AE0F & LD (IP + 16) & Инициализируем AC значением X \\\hline
0E6 & 0C00 & PUSH & Кладём AC на вершину стека, $\text{SP = }7\text{FF}_{16}$, $\text{(7FF)} = \text{X}$, $\text{(7FE)} = \text{00E2}$  \\\hline
0E7 & D691 & CALL 691 & Вызываем подпрограмму, $\text{SP} = 7\text{FE}_{16}$, 
$\text{(7FE)} = 00\text{E}8_{16}$ \\\hline
0E8 & 0800 & POP & AC = f(X), SP = 000 \\\hline
0E9 & 4E0C & ADD (IP + 12) & AC = f(X) + f(Z - 1) \\\hline
0EA & EE0B & ST (IP + 11) & (0F6) = AC = f(Z - 1) + f(X) \\\hline
0EB & AE08 & LD (IP + 8) & Инициализируем AC значением Y \\\hline
0EC & 0740 & DEC & Декрементируем Y \\\hline
0ED & 0C00 & PUSH & Кладём AC на вершину стека, $\text{SP = }7\text{FF}_{16}$, $\text{(7FF)} = \text{Y - 1}$, $\text{(7FE)} = \text{00E8}$  \\\hline
0EE & D691 & CALL 691 & Вызываем подпрограмму, $\text{SP} = 7\text{FE}_{16}$, 
$\text{(7FE)} = 00\text{EF}_{16}$ \\\hline
0EF & 0800 & POP & AC = f(Y - 1), SP = 000 \\\hline
0F0 & 6E05 & SUB (IP + 5) & Вычитаем из AC (0F6) = f(Z - 1) + f(X), AC = f(Y - 1) - f(Z - 1) - f(X) \\\hline
0F1 & EE04 & ST (IP + 4) & (0F6) = AC = f(Y - 1) - f(Z - 1) - f(X) \\\hline
0F2 & 0100 & HLT & Остановка программы \\\hline
0F3 & ZZZZ & Z & Число, аргумент функции \\\hline
0F4 & YYYY & Y & Число, аргумент функции  \\\hline
0F5 & XXXX & X & Число, аргумент функции  \\\hline
0F6 & 00EF & R & Число, значение выражения \\\hline
691 & AC01 & LD (SP + 1) & Загружаем в AC значение аргумента (элемент стека по адресу 7FF), обновляем флаги состояния \\\hline
692 & F204 & BNS (IP + 4) & Если аргумент ф-ции < 0, то переходим на (697) \\\hline
693 & F003 & BZS (IP + 3) & Если аргумент ф-ции = 0, то переходим на (697) \\\hline
694 & 7E08 & CMP (IP + 8) & Если аргумент $> 0$, то устанавливаем флаги по результату $\text{AC} - \text{063F}_{16}$ \\\hline
695 & F004 & BZS (IP + 4) & Если аргумент ф-ции равен $\text{063F}_{16}$, то переходим на (69A) \\\hline
696 & F803 & BLT (IP + 3) & Если аргумент ф-ции меньше $\text{063F}_{16}$, но > 0, то переходим на (69A) \\\hline
697 & 4C01 & ADD (SP + 1) & Если аргумент $\leq 0 \text{ или} > \text{063F}_{16}$, то прибавляем к AC аргумент (то есть умножим на 2 AC) \\\hline
698 & 6E05 & SUB (IP + 5) & После умножения на 2 вычитаем из AC значение $\text{00EF}_{16}$ \\\hline
699 & CE01 & JUMP (IP + 1) & После вычитания переходим на ячейку (69B). Теперь AC = $2 \cdot \text{аргумент} - \text{00EF}_{16}$ \\\hline
69A & AE02 & LD (IP + 2) & Если аргумент $\in (0; \text{063F}_{16}]$, то инициализируем AC значением $\text{063F}_{16}$ \\\hline
69B & EC01 & ST (SP + 1) & Загружаем в 7FF значение AC \\\hline
69C & 0A00 & RET & Выходим из подпрограммы, следующая команда выполнится по адресу из 7FE (вершина стека), теперь SP = 7FF \\\hline
69D & 063F & A & Константа для сравнения $1599_{10}$ \\\hline
69E & 00EF & B & Константа для вычитания $239_{10}$ \\\hline
\end{longtable}
\noindent Программа вычисляет следующее значение: \\
R = f(Y - 1) - f(Z - 1) - f(X), где \\
\[
f(n) =
\begin{cases}
    1599, & n \in (0, 1599] \\
    2n - 239, & n \in (-\infty, 0] \cup (1599, +\infty)
\end{cases}
\]
\begin{figure}[H]
    \centering
\includegraphics[width=0.5\linewidth]{PO2.png}
\end{figure}
\section{ОП и ОДЗ исходных данных и результата}
\subsection{Область представления}
X, Y, Z, R, A, B – 16-ричные знаковые числа
\subsection{Область определения}
A = $063\text{F}_{16} = 1599_{10}$ (константа) \\
B = $00\text{EF}_{16} = 239_{10}$ (константа) \\
Основная программа вычисляет выражение R = f(Y - 1) - f(Z - 1) - f(X) \\

\noindent При значении $n \leq 1599$ и $n > 0$ функция вернёт 1599, то есть при вводе любого значения из этих промежутков не произойдёт переполнения. \\

\noindent При  $n > 1599$ или $n \leq 0$ функция она вернёт 2n - 239. Найдем ОДЗ для аргумента функции в этом случае: \\
$min(R) = -2^{15} = -32768$ \\
$max(R) = 2^{15} - 1 = 32767$ \\
Тогда значение f по модулю не должно превышать $\left\lfloor \frac{32767}{3} \right\rfloor$ = 10922 (очевидно f принимает такое значение). \\
$max(n) = \left\lfloor \frac{10922 + 239}{2} \right\rfloor = 5580$ \\
$min(n) = \left\lfloor \frac{-10922 + 239}{2} \right\rfloor = -5341$ \\
При вышеуказанных значениях аргумента значение R не переполнится, но из-за того, что числа целые, $R \geq (-5341 \cdot 2 - 239) \cdot 3 = -32763$ и $R \leq (5580 \cdot 2 - 239) \cdot 3 = 32763$. Итого: \\
\[
\left\{
\begin{array}{l}
    R \in [-32763; 32763] \\
    X \in [-5341; 5580] \\
    Y, Z \in [-5340; 5581]
\end{array}
\right.
\]
\section{Трассировка}
\begin{longtable}{|*{13}{>{\ttfamily}r|}}
\hline
\textbf{Адр} & \textbf{Знчн} & \textbf{IP} & \textbf{CR} & \textbf{AR} & \textbf{DR} & \textbf{SP} & \textbf{BR} & \textbf{AC} & \textbf{PS} & \textbf{NZVC} & \textbf{Адр} & \textbf{Знчн}  \\ 
\hline
\endhead
0DC & 0200 & 0DC & 0000 & 000 & 0000 & 000 & 0000 & 0000 & 004 & 0100 &  & \\\hline
0DC & 0200 & 0DD & 0200 & 0DC & 0200 & 000 & 00DC & 0000 & 004 & 0100 &  & \\\hline
0DD & EE18 & 0DE & EE18 & 0F6 & 0000 & 000 & 0018 & 0000 & 004 & 0100 & 0F6 & 0000 \\\hline
0DE & AE14 & 0DF & AE14 & 0F3 & 7DCF & 000 & 0014 & 7DCF & 000 & 0000 &  & \\\hline
0DF & 0740 & 0E0 & 0740 & 0DF & 0740 & 000 & 00DF & 7DCE & 001 & 0001 &  & \\\hline
0E0 & 0C00 & 0E1 & 0C00 & 7FF & 7DCE & 7FF & 00E0 & 7DCE & 001 & 0001 & 7FF & 7DCE \\\hline
0E1 & D691 & 691 & D691 & 7FE & 00E2 & 7FE & D691 & 7DCE & 001 & 0001 & 7FE & 00E2 \\\hline
691 & AC01 & 692 & AC01 & 7FF & 7DCE & 7FE & 0001 & 7DCE & 001 & 0001 &  & \\\hline
692 & F204 & 693 & F204 & 692 & F204 & 7FE & 0692 & 7DCE & 001 & 0001 &  & \\\hline
693 & F003 & 694 & F003 & 693 & F003 & 7FE & 0693 & 7DCE & 001 & 0001 &  & \\\hline
694 & 7E08 & 695 & 7E08 & 69D & 063F & 7FE & 0008 & 7DCE & 001 & 0001 &  & \\\hline
695 & F004 & 696 & F004 & 695 & F004 & 7FE & 0695 & 7DCE & 001 & 0001 &  & \\\hline
696 & F803 & 697 & F803 & 696 & F803 & 7FE & 0696 & 7DCE & 001 & 0001 &  & \\\hline
697 & 4C01 & 698 & 4C01 & 7FF & 7DCE & 7FE & 0001 & FB9C & 00A & 1010 &  & \\\hline
698 & 6E05 & 699 & 6E05 & 69E & 00EF & 7FE & 0005 & FAAD & 009 & 1001 &  & \\\hline
699 & CE01 & 69B & CE01 & 699 & 069B & 7FE & 0001 & FAAD & 009 & 1001 &  & \\\hline
69B & EC01 & 69C & EC01 & 7FF & FAAD & 7FE & 0001 & FAAD & 009 & 1001 & 7FF & FAAD \\\hline
69C & 0A00 & 0E2 & 0A00 & 7FE & 00E2 & 7FF & 069C & FAAD & 009 & 1001 &  & \\\hline
0E2 & 0800 & 0E3 & 0800 & 7FF & FAAD & 000 & 00E2 & FAAD & 009 & 1001 &  & \\\hline
0E3 & 6E12 & 0E4 & 6E12 & 0F6 & 0000 & 000 & 0012 & FAAD & 009 & 1001 &  & \\\hline
0E4 & EE11 & 0E5 & EE11 & 0F6 & FAAD & 000 & 0011 & FAAD & 009 & 1001 & 0F6 & FAAD \\\hline
0E5 & AE0F & 0E6 & AE0F & 0F5 & 0640 & 000 & 000F & 0640 & 001 & 0001 &  & \\\hline
0E6 & 0C00 & 0E7 & 0C00 & 7FF & 0640 & 7FF & 00E6 & 0640 & 001 & 0001 & 7FF & 0640 \\\hline
0E7 & D691 & 691 & D691 & 7FE & 00E8 & 7FE & D691 & 0640 & 001 & 0001 & 7FE & 00E8 \\\hline
691 & AC01 & 692 & AC01 & 7FF & 0640 & 7FE & 0001 & 0640 & 001 & 0001 &  & \\\hline
692 & F204 & 693 & F204 & 692 & F204 & 7FE & 0692 & 0640 & 001 & 0001 &  & \\\hline
693 & F003 & 694 & F003 & 693 & F003 & 7FE & 0693 & 0640 & 001 & 0001 &  & \\\hline
694 & 7E08 & 695 & 7E08 & 69D & 063F & 7FE & 0008 & 0640 & 001 & 0001 &  & \\\hline
695 & F004 & 696 & F004 & 695 & F004 & 7FE & 0695 & 0640 & 001 & 0001 &  & \\\hline
696 & F803 & 697 & F803 & 696 & F803 & 7FE & 0696 & 0640 & 001 & 0001 &  & \\\hline
697 & 4C01 & 698 & 4C01 & 7FF & 0640 & 7FE & 0001 & 0C80 & 000 & 0000 &  & \\\hline
698 & 6E05 & 699 & 6E05 & 69E & 00EF & 7FE & 0005 & 0B91 & 001 & 0001 &  & \\\hline
699 & CE01 & 69B & CE01 & 699 & 069B & 7FE & 0001 & 0B91 & 001 & 0001 &  & \\\hline
69B & EC01 & 69C & EC01 & 7FF & 0B91 & 7FE & 0001 & 0B91 & 001 & 0001 & 7FF & 0B91 \\\hline
69C & 0A00 & 0E8 & 0A00 & 7FE & 00E8 & 7FF & 069C & 0B91 & 001 & 0001 &  & \\\hline
0E8 & 0800 & 0E9 & 0800 & 7FF & 0B91 & 000 & 00E8 & 0B91 & 001 & 0001 &  & \\\hline
0E9 & 4E0C & 0EA & 4E0C & 0F6 & FAAD & 000 & 000C & 063E & 001 & 0001 &  & \\\hline
0EA & EE0B & 0EB & EE0B & 0F6 & 063E & 000 & 000B & 063E & 001 & 0001 & 0F6 & 063E \\\hline
0EB & AE08 & 0EC & AE08 & 0F4 & 0012 & 000 & 0008 & 0012 & 001 & 0001 &  & \\\hline
0EC & 0740 & 0ED & 0740 & 0EC & 0740 & 000 & 00EC & 0011 & 001 & 0001 &  & \\\hline
0ED & 0C00 & 0EE & 0C00 & 7FF & 0011 & 7FF & 00ED & 0011 & 001 & 0001 & 7FF & 0011 \\\hline
0EE & D691 & 691 & D691 & 7FE & 00EF & 7FE & D691 & 0011 & 001 & 0001 & 7FE & 00EF \\\hline
691 & AC01 & 692 & AC01 & 7FF & 0011 & 7FE & 0001 & 0011 & 001 & 0001 &  & \\\hline
692 & F204 & 693 & F204 & 692 & F204 & 7FE & 0692 & 0011 & 001 & 0001 &  & \\\hline
693 & F003 & 694 & F003 & 693 & F003 & 7FE & 0693 & 0011 & 001 & 0001 &  & \\\hline
694 & 7E08 & 695 & 7E08 & 69D & 063F & 7FE & 0008 & 0011 & 008 & 1000 &  & \\\hline
695 & F004 & 696 & F004 & 695 & F004 & 7FE & 0695 & 0011 & 008 & 1000 &  & \\\hline
696 & F803 & 69A & F803 & 696 & F803 & 7FE & 0003 & 0011 & 008 & 1000 &  & \\\hline
69A & AE02 & 69B & AE02 & 69D & 063F & 7FE & 0002 & 063F & 000 & 0000 &  & \\\hline
69B & EC01 & 69C & EC01 & 7FF & 063F & 7FE & 0001 & 063F & 000 & 0000 & 7FF & 063F \\\hline
69C & 0A00 & 0EF & 0A00 & 7FE & 00EF & 7FF & 069C & 063F & 000 & 0000 &  & \\\hline
0EF & 0800 & 0F0 & 0800 & 7FF & 063F & 000 & 00EF & 063F & 000 & 0000 &  & \\\hline
0F0 & 6E05 & 0F1 & 6E05 & 0F6 & 063E & 000 & 0005 & 0001 & 001 & 0001 &  & \\\hline
0F1 & EE04 & 0F2 & EE04 & 0F6 & 0001 & 000 & 0004 & 0001 & 001 & 0001 & 0F6 & 0001 \\\hline
0F2 & 0100 & 0F3 & 0100 & 0F2 & 0100 & 000 & 00F2 & 0001 & 001 & 0001 &  &\\\hline
\end{longtable}
\section{Вывод}
В ходе данной лабораторной работы я: \\
Познакомился с реализацией подпрограмм в БЭВМ \\
Познакомился с такой структурой данных, как стек \\
Закрепил знания о режимах адресации в БЭВМ, изучал относительную адресацию относительно вершины стека
\end{document}