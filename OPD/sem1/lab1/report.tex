\input{preambula_labs}
\begin{document}
\thispagestyle{empty}
\begin{center}
\LARGE{Университет ИТМО} 
\vspace{20pt}

\LARGE{Факультет программной инженерии и компьютерной техники \\
Образовательная программа системное и прикладное программное обеспечение}
\vspace{160pt}

\LARGE{Лабораторная работа  \textnumero 1 \\
По дисциплине "Основы профессиональной деятельности" \\ 
Вариант 90012}
\vspace{120pt}
\end{center}

\begin{flushright}
\LARGE{Выполнил студент группы P3109 \\ 
Евграфов Артём Андреевич \\
Проверила: \\
Бострикова Дарья Константиновна}
\vspace{120pt}
\end{flushright}

\begin{center}
\Large{Санкт-Петербург 2024}
\end{center}

\newpage
\setcounter{page}{1}
\section*{Цель работы}
Знакомство с основным способом взаимодействия с ОС UNIX, командным интерфейсом, а также базовой функциональностью интерпретатора shell. Получение основных сведений о файловой системе и правах доступа к файлам.
\section*{Задания варианта}
\subsection*{Задание 1}
Создать приведенное в варианте дерево каталогов и файлов с содержимым. В качестве корня дерева использовать каталог lab0 своего домашнего каталога. Для создания и навигации по дереву использовать команды: mkdir, echo, cat, touch, ls, pwd, cd, more, cp, rm, rmdir, mv.
\begin{figure}[H]
    \centering
    \includegraphics[width=0.3\linewidth]{P1(L1O).png}
    \label{fig:enter-label}
\end{figure}
\subsection*{Задание 2}
Установить согласно заданию права на файлы и каталоги при помощи команды chmod, используя различные способы указания прав. \\ 
$\bullet$ amoonguss4: права 337 \\
$\bullet$ hippopotas: владелец должен записывать директорию и переходить в нее; группа-владелец должна только переходить в директорию; остальные пользователи должны только переходить в директорию \\
$\bullet$ whirlpede: права 770 \\
$\bullet$ shelmet: r-----r-- \\
$\bullet$ cinccino6: владелец должен читать файл; группа-владелец должна не иметь никаких прав; остальные пользователи должны читать файл \\
$\bullet$ dragonair5: владелец должен не иметь никаких прав; группа-владелец должна не иметь никаких прав; остальные пользователи должны читать файл \\
$\bullet$ klinklang8: владелец должен записывать директорию и переходить в нее; группа-владелец должна записывать директорию и переходить в нее; остальные пользователи должны записывать директорию и переходить в нее \\
$\bullet$ pidgey: владелец должен не иметь никаких прав; группа-владелец должна читать файл; остальные пользователи должны читать и записывать файл \\
$\bullet$ slowpoke: права 044 \\
$\bullet$ kricketot: владелец должен читать директорию и переходить в нее; группа-владелец должна только переходить в директорию; остальные пользователи должны записывать директорию \\
$\bullet$ boldore: r-xrwxrwx \\
$\bullet$ lairon2: r--r----- \\
$\bullet$ trapinch6: владелец должен записывать директорию и переходить в нее; группа-владелец должна записывать директорию и переходить в нее; остальные пользователи должны читать директорию и переходить в нее \\
$\bullet$ ralts: права 500 \\
$\bullet$ vileplume: rwx-wxrw- \\
$\bullet$ tepig: владелец должен читать файл; группа-владелец должна не иметь никаких прав; остальные пользователи должны читать файл \\
$\bullet$ wingull: -wxrwxr-x
\subsection*{Задание 3}
Скопировать часть дерева и создать ссылки внутри дерева согласно заданию при помощи команд cp и ln, а также комманды cat и перенаправления ввода-вывода. \\
$\bullet$ скопировать файл cinccino6 в директорию lab0/trapinch6/wingull \\
$\bullet$ скопировать содержимое файла dragonair5 в новый файл lab0/klinklang8/slowpokedragonair \\
$\bullet$ создать символическую ссылку c именем Copy\_78 на директорию trapinch6 в каталоге lab0 \\
$\bullet$ объеденить содержимое файлов lab0/amoonguss4/shelmet, lab0/klinklang8/slowpoke, в новый файл lab0/lairon2\_34 \\
$\bullet$ скопировать рекурсивно директорию klinklang8 в директорию lab0/klinklang8/kricketot \\
$\bullet$ cоздать жесткую ссылку для файла cinccino6 с именем lab0/amoonguss4/shelmetcinccino \\
$\bullet$ cоздать символическую ссылку для файла cinccino6 с именем lab0/amoonguss4/shelmetcinccino 
\subsection*{Задание 4}
Используя команды cat, wc, ls, head, tail, echo, sort, grep выполнить в соответствии с вариантом задания поиск и фильтрацию файлов, каталогов и содержащихся в них данных. \\
$\bullet$ Подсчитать количество строк содержимого файлов: shelmet, pidgey, slowpoke, отсортировать вывод по увеличению количества, ошибки доступа не подавлять и не перенаправлять \\
$\bullet$ Вывести рекурсивно список имен и атрибутов файлов в директории klinklang8, список отсортировать по возрастанию даты изменения записи о файле, ошибки доступа перенаправить в файл в директории /tmp \\
$\bullet$ Рекурсивно вывести содержимое файлов с номерами строк из директории lab0, имя которых начинается на 'k', строки отсортировать по имени a->z, добавить вывод ошибок доступа в стандартный поток вывода \\
$\bullet$ Вывести три первых элемента рекурсивного списка имен и атрибутов файлов в директории lab0, список отсортировать по возрастанию размера, добавить вывод ошибок доступа в стандартный поток вывода \\
$\bullet$ Вывести три первых элемента рекурсивного списка имен и атрибутов файлов в директории lab0, заканчивающихся на символ '6', список отсортировать по возрастанию даты доступа к файлу, ошибки доступа перенаправить в файл в директории /tmp \\
$\bullet$ Вывести содержимое файлов с номерами строк в директории amoonguss4, оставить только строки, содержащие "rbi"\,, ошибки доступа перенаправить в файл в директории /tmp
\subsection*{Задание 5}
Выполнить удаление файлов и каталогов при помощи команд rm и rmdir согласно варианту задания. \\
$\bullet$ Удалить файл dragonair5 \\
$\bullet$ Удалить файл lab0/klinklang8/slowpoke \\
$\bullet$ удалить символические ссылки lab0/amoonguss4/shelmetcincci* \\
$\bullet$ удалить жесткие ссылки lab0/amoonguss4/shelmetcincci* \\
$\bullet$ Удалить директорию amoonguss4 \\
$\bullet$ Удалить директорию lab0/klinklang8/boldore
\newpage
\section*{Решение}
\subsection*{Задание 1}
\verb|mkdir lab0| \\
\verb|cd lab0| \\
\verb|mkdir amoonguss4 klinklang8 trapinch6| \\
\verb|echo -e "Способности Last Chance Cute\nCharm Technician" > cinccino6| \\
\verb|echo "Живет Cave Freshwater" > dragonair5| \\
\verb|echo "Живет Cave Mountain" > lairon2| \\
\verb|cd amoonguss4| \\
\verb|mkdir hippopotas whirlpede| \\
\verb|echo "Тип диеты Herbivore" > shelmet| \\
\verb|cd ..| \\
\verb|cd klinklang8| \\
\verb|echo -e "Живет\nForest Urban" > pidgey| \\
\verb|echo -e "Развитые способности\nRegenerator" > slowpoke| \\
\verb|mkdir kricketot boldore| \\
\verb|cd ..| \\
\verb|cd trapinch6| \\
\verb|mkdir ralts vileplume wingull| \\
\verb|echo "Тип диеты Herbivore" > tepig| \\
\verb|cd ..|
\subsection*{Задание 2}
\verb|chmod 337 amoonguss4| \\
\verb|cd amoonguss4| \\
\verb|chmod 311 hippopotas| \\
\verb|chmod u=rwx whirlpede| \\
\verb|chmod g=rwx whirlpede| \\
\verb|chmod o= whirlpede| \\
\verb|chmod 404 shelmet| \\
\verb|cd ..| \\
\verb|chmod u-w cinccino6| \\
\verb|chmod u-x cinccino6| \\
\verb|chmod g= cinccino6| \\
\verb|chmod o=u cinccino6| \\
\verb|chmod 004 dragonair5| \\
\verb|chmod u=wx klinklang8| \\
\verb|chmod g=u klinklang8| \\
\verb|chmod o=u klinklang8| \\
\verb|cd klinklang8| \\
\verb|chmod 046 pidgey| \\
\verb|chmod 044 slowpoke| \\
\verb|chmod g=rwx boldore| \\
\verb|chmod o=g boldore| \\
\verb|chmod u=g boldore| \\
\verb|chmod u-w boldore| \\
\verb|chmod 512 kricketot| \\
\verb|cd ..| \\
\verb|chmod 440 lairon2| \\
\verb|chmod 335 trapinch6| \\
\verb|cd trapinch6| \\
\verb|chmod 500 ralts| \\
\verb|chmod u=rwx vileplume| \\
\verb|chmod g=u vileplume| \\ 
\verb|chmod o=u vileplume| \\
\verb|chmod g-r vileplume| \\ 
\verb|chmod o-x vileplume| \\
\verb|chmod 404 tepig| \\
\verb|chmod 375 wingull| \\
\verb|cd lab0|
\verb|cd ..|
\subsection*{Задание 3}
\verb|cp cinccino6 trapinch6/wingull| \\
\verb|chmod u+r dragonair5| \\
\verb|chmod u+x klinklang8| \\
\verb|cat dragonair5 > klinklang8/slowpokedragonair| \\
\verb|chmod u-r dragonair5| \\
\verb|chmod u-x klinklang8| \\
\verb|ln -s Copy_78 trapinch6| \\
\verb|chmod u+x klinklang8| \\
\verb|chmod u+r klinklang8/slowpoke| \\
\verb|cat amoonguss4/shelmet klinklang8/slowpoke > lairon2_34| \\
\verb|chmod u-r klinklang8/slowpoke| \\
\verb|chmod u-x klinklang8| \\
\verb|chmod u+rx klinklang8| \\
\verb|chmod u+r klinklang8/*| \\
\verb|chmod u+w klinklang8/kricketot/| \\
\verb|cp -R klinklang8 klinklang8/kricketot| \\
\verb|chmod u-x klinklang8/kricketot/klinklang8/kricketot/| \\
\verb|chmod u-r klinklang8/kricketot/klinklang8/*| \\
\verb|chmod u-rx klinklang8/kricketot/klinklang8| \\
\verb|chmod u-w klinklang8/kricketot/| \\
\verb|chmod u-r klinklang8/*| \\
\verb|chmod u-rx klinklang8| \\
\verb|ln ~/lab0/cinccino6 ~/lab0/amoonguss4/shelmetcinccino| \\
\verb|ln -s ~/lab0/cinccino6 ~/lab0/amoonguss4/shelmetcinccino7| \\
\subsection*{Иерархия файлов, полученная после выполнения скрипта п. 3} 
\verb|total 28| \\
\verb|d-wx-wxrwx  4 s465826 studs  6 19 окт.  00:56 amoonguss4| \\
\verb|-r-----r--  1 s465826 studs 57 19 окт.  00:56 cinccino6| \\
\verb|-------r--  1 s465826 studs 27 19 окт.  00:56 dragonair5| \\
\verb|d-w--wx-wx  4 s465826 studs  7 19 окт.  00:56 klinklang8| \\
\verb|-r--r-----  1 s465826 studs 25 19 окт.  00:56 lairon2| \\
\verb|-rw-r--r--  1 s465826 studs 81 19 окт.  00:56 lairon2_34| \\
\verb|d-wx-wxr-x  5 s465826 studs  7 19 окт.  00:56 trapinch6| \\

\noindent \verb|./amoonguss4:| \\
\verb|total 0| \\
\verb|ls: ./amoonguss4: Permission denied| \\

\noindent \verb|./klinklang8:| \\
\verb|total 0| \\
\verb|ls: ./klinklang8: Permission denied| \\

\noindent \verb|./trapinch6:| \\
\verb|total 0| \\ 
\verb|ls: ./trapinch6: Permission denied| \\

\noindent \verb|cat dragonair5 > klinklang8/slowpokedragonair| \\
\verb|cat: dragonair5: Permission denied| (ERROR) \\
chmod u+r dragonair5 (decision) \\
chmod u+x klinklang8 (decision) \\

\noindent \verb|cat amoonguss4/shelmet klinklang8/slowpoke > lairon2\_34| \\
\verb|cat: klinklang8/slowpoke: Permission denied| (ERROR) \\
chmod u+x klinklang8 (decision) \\
chmod u+r klinklang8/slowpoke (decision) \\

\noindent \verb|cp -R klinklang8 klinklang8/kricketot| \\
\verb|cp: klinklang8: Permission denied| (ERROR) \\
chmod u+rx klinklang8 (decision) \\
chmod u+r klinklang8/* (decision) \\
chmod u+w klinklang8/kricketot/ (decision) \\

\subsection*{Задание 4}
\verb|shopt -s globstar| \\
\verb|wc -l amoonguss4/shelmet klinklang8/pidgey klinklang8/slowpoke ||\verb| grep -v "total" ||\verb| sort -n| \\
\verb|ls -lRtr klinklang8/ 2>> /tmp/errorss| \\
\verb|grep -r "$" **/k* || \verb|sort 2>&1| \\
\verb|ls -lR ||\verb| grep -v 'total' ||\verb| head -n 3 ||\verb| sort -n -k 5 2>&1| \\
\verb|ls -lRt ||\verb| grep "6$" 2> /tmp/errorss| \\
\verb|cat amoonguss4/* ||\verb| grep "rbi" 2> /tmp/errorss| \\
\subsection*{Вывод команд скрипта п. 4}
\verb|wc -l amoonguss4/shelmet klinklang8/pidgey klinklang8/slowpoke ||\verb| grep -v "total" ||\verb| sort -n| \\
\verb|wc: klinklang8/pidgey: open: Permission denied| \\
\verb|wc: klinklang8/slowpoke: open: Permission denied| \\
\verb|       1 amoonguss4/shelmet| \\

\noindent \verb|ls -lRtr klinklang8/ 2>> /tmp/errorss| \\
\verb|total 0| \\

\noindent \verb|grep -r "$" **/k* || \verb|sort 2>&1| \\
\verb|grep: klinklang8: Permission denied| \\

\noindent \verb|ls -lR ||\verb| grep -v 'total' ||\verb| head -n 3 ||\verb| sort -n -k 5 2>&1| \\
\verb|1| \\
\verb|ls: ./amoonguss4: Permission denied| \\
\verb|ls: ./klinklang8: Permission denied| \\
\verb|ls: ./trapinch6: Permission denied| \\
\verb|d-wx-wxrwx  4 s465826 studs  6 19 окт.  02:01 amoonguss4| \\
\verb|-------r--  1 s465826 studs 27 19 окт.  02:01 dragonair5| \\
\verb|-r-----r--  1 s465826 studs 57 19 окт.  02:01 cinccino6| \\

\noindent \verb|ls -lRt ||\verb| grep "6$" 2> /tmp/errorss| \\
\verb|ls: ./amoonguss4: Permission denied| \\
\verb|ls: ./trapinch6: Permission denied| \\
\verb|ls: ./klinklang8: Permission denied| \\
\verb|d-wx-wxr-x  5 s465826 studs  7 19 окт.  02:01 trapinch6| \\
\verb|-r-----r--  1 s465826 studs 57 19 окт.  02:01 cinccino6| \\

\noindent \verb|cat amoonguss4/* ||\verb| grep "rbi" 2> /tmp/errorss| \\
\verb|cat: amoonguss4/*: No such file or directory| \\
\subsection*{Задание 5}
\verb|rm -f dragonair5| \\
\verb|rm -f klinklang8/slowpoke| \\
\verb|rm -f amoonguss4/shelmetcinccino| \\
\verb|rm -rf amoonguss4/| \\
\verb|rm -rf lab0/klinklang8/boldore| \\

\noindent \verb|rm -rf amoonguss4/| \\
\verb|rm: amoonguss4/: Permission denied| (ERROR) \\
chmod -R u+r amoonguss4/ (decision) \\
chmod -R u+w amoonguss4/ (decision) \\

\noindent \Large{Ссылка на файл со списком всех команд: \href{https://disk.yandex.ru/d/02RfeRSN2Qf4tA}{файл}}
\normalsize

\section*{Вывод}
В ходе выполнения данной лабораторной работы я изучил основные команды для работы с OC семейства UNIX и базовую функциональность интерпретатора shell. 

\end{document} 
