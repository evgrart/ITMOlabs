\input{preambula_labs}
\begin{document}
\thispagestyle{empty}
\begin{center}
\LARGE{Университет ИТМО} 
\vspace{20pt}

\LARGE{Факультет программной инженерии и компьютерной техники \\
Образовательная программа системное и прикладное программное обеспечение}
\vspace{160pt}

\LARGE{Лабораторная работа  \textnumero 6 \\
По дисциплине "Основы профессиональной деятельности" \\ 
Вариант 9602}
\vspace{120pt}
\end{center}

\begin{flushright}
\LARGE{Выполнил студент группы P3109 \\ 
Евграфов Артём Андреевич \\
Проверила: \\
Ткешелашвили Нино Мерабиевна}
\vspace{120pt}
\end{flushright}

\begin{center}
\Large{Санкт-Петербург 2025}
\end{center}

\newpage
\setcounter{page}{1}
\tableofcontents
\newpage
\section{Задание варианта 9602}
\begin{figure}[H]
    \centering
\includegraphics[width=1\linewidth]{P10.png}
\end{figure}
\section{Реализация задания на ассемблере БЭВМ}
\begin{minted}[linenos=true, frame=single, breaklines=true]{asm}
ORG 0x000
V0: WORD $DEFAULT, 0x180
V1: WORD $INT1, 0x180
V2: WORD $INT2, 0x180
V3: WORD $DEFAULT, 0x180
V4: WORD $DEFAULT, 0x180
V5: WORD $DEFAULT, 0x180
V6: WORD $DEFAULT, 0x180
V7: WORD $DEFAULT, 0x180

ORG 0x00F
DEFAULT: IRET 

ORG 0x034
X:   WORD 0x0000
MIN: WORD 0xFFEC ; -20
MAX: WORD 0x0016 ; 22

START:  CLA ; запрещаем прерывания неиспользуемых ВУ
	OUT 0x1
	OUT 0x7	
	OUT 0xB
	OUT 0xE
	OUT 0x12
	OUT 0x16
	OUT 0x1A
	OUT 0x1E
	
	LD #0x9 ; задаём вектора прерываний для ВУ-1 и ВУ-2
	OUT 0x3
	LD #0xA
	OUT 0x5

MAIN:	DI
	LD X
	INC
	INC
	INC
	CALL $CHECK
	ST X
	EI
	JUMP MAIN

CHECK:
    CMP MIN
    BLT RETURN_MIN
    CMP MAX
    BGE RETURN_MIN
    JUMP RETURN  
    RETURN_MIN: LD $MIN 
    RETURN: RET

LDMAX: LD MAX

INT1:	LD X
	NOP ; для отладки
	ASL
	ASL
	ADD X
	ADD X
	SUB #5
	OUT 0x2
	NOP ; для отладки
	IRET

INT2:	IN 0x4
	NOP ; для отдалки (посмотреть что лежало в ВУ-2)
	NEG
	ST X
	NOP
	IRET

\end{minted}
\section{ОП и ОДЗ исходных данных и результата}
\subsection{Область представления}
X, MIN, MAX – 16-разрядные знаковые числа \\
DR КВУ – 8-разрядное знаковое число
\subsection{Область определения}
$-128 \leq 6x- 5 \leq 127$ \\
\(x \in [-20; 22]\), то есть \(x \in [0\text{xFFEC}; 0\text{x}0016]\).
\section{Проверка корректности}
Проверка основной программы: \\
1. Загрузить код программы в БЭВМ. \\
2. Записать в переменную X максимальное по ОДЗ значение (22) \\
3. Запустить программу в потактовом режиме. \\
4. Когда IP станет равным 46, в AC появится загруженное значение. Когда IP станет равным 49, значение АС увеличится на 3. Если результат не в ОДЗ, то при дальнейшей работы программы АС станет равным 0xFFEC. Если переполнения за ОДЗ не произошло, то при дальшейшей работе программы АС снова увеличится на 3. \\

\begin{tabular}{|c|c|c|}
\hline
X & Ожидание & AC \\
\hline
0x0015 & 0x0018 & 0x0018 \\
\hline
0x0022 & 0\text{xFFEC} & 0\text{xFFEC} \\
\hline
\end{tabular} \\

\noindent Проверка прерывания ВУ-1: \\
1. Загрузить текст программы в БЭВМ. \\
2. Заменить все NOP на HLT. \\
3. Запустить программу в режиме РАБОТА (ТЫК "останов"\, ТЫК пуск). \\
4. Установить «Готовность ВУ-1». \\
5. Дождаться останова. \\
6. Записать значение аккумулятора (значение X) \\
7. Рассчитать ожидаемое значение после обработки прерывания по функции 6x-5. \\
8. Нажать «Продолжение». \\
9. Дождаться останова. \\
10. Записать результат обработки прерывания, регистра DR КВУ-1, и сравнить его с ожидаемым. \\
11. Нажать «Продолжение». \\

\begin{tabular}{|c|c|c|}
\hline
X & Ожидание $6x-5$ & DR ВУ \\
\hline
0x000C & 0x43 & 0x43 \\
\hline
0x0015 & 0x79 & 0x79 \\
\hline
\end{tabular} \\


\noindent ВУ-2: \\ 
1. Ввести в ВУ-2 произвольное число, записать его \\
2. Установить «Готовность ВУ-2». \\
3. Дождаться останова. \\
4. Записать значение аккумулятора. \\
5. Сравнить его с тем числом, которое было введено в ВУ-2 (они должны быть равны). \\
6. Нажать «Продолжение». \\
7. Дождаться останова. \\
8. Ввести в клавишный регистр адрес 0x034 и нажать «ввод адреса», затем «чтение». \\
9. Записать значение DR и сравнить его с тем числом, которое было введено в ВУ-2. Сумма значения DR и числа из ВУ-2 должна давать 0. \\

\begin{tabular}{|c|c|c|}
\hline
DR ВУ & Ожидание $-\text{DR}$ & X \\
\hline
0x0010 & 0xF0 & 0xF0 \\
\hline
0x000С & 0xF4 & 0xF4 \\
\hline
\end{tabular} \\
\section{Вывод}
Во время выполнения данной работы я научился работать с прерываниями на ВУ-1 и ВУ-2. Научился инициализировать векторы прерывания.

\end{document}
